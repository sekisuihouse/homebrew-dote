#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include "kmc_lib.h"
int suiti = 0;
int color(int x,int k) {
    if (x == 0) return rand();
    else if (x == 1) return 0;
    else if (x == 11) return k * 2 + 3;
    else return 3;
}
    char n[16][16] = {
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0,},
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    };
    char n2[16][16] = {
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,},
        { 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,},
        { 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,},
        { 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0,},
        { 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0,},
        { 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0,},
        { 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,},
        { 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,},
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    };
    char h[16][16] = {
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,11, 0,11,},
        { 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0,11,11,11,11,},
        { 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0,11,11,11,11,},
        { 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0,11,11,11,},
        { 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0,11, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0,},
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    };
    char h2[16][16] = {
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,},
        { 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,},
        { 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,},
        { 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0,},
        {11, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0,11,},
        {11, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,11,},
        { 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,},
        { 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,},
        { 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,},
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    };


    void dote(int k)
    {
        printf("\e[H\e[J\e[?7l");

        if(k % 10 == 0)
        {
            if(suiti == 0)
            {
                suiti = 1;
            } else {
                suiti = 0;
            }
        }
        if (suiti == 0)
        {
            for(int sui = 0; sui != (k % 10); sui++)
            {
                printf("\n");
            }

        } else {
            for(int sui = 10; sui != 10 - (k % 10); sui--)
            {
                printf("\n");
            }
        }
        printf("%*s", k, ""); printf("%*s", k, ""); 
        printf("\x1b[%dmメガネならモッキー    メガネならモッキ- メガネならモッキー メガネならモッキー メガネならモッキー",rand() % 6 + 30);  
        
        for(int i = 0; i < 16; i++)
        {
            
            printf("%*s", k, ""); 
            for(int j = 0; j < 16; j++)
            {
                int x = h[i][j];
                if(k % 2 ==1) {x = h[i][j];}
                printf("\e[48;5;%dm", color(x,i));
                printf(" ");
                printf("%2s",""); // printf("%2d", x);
                printf("\e[0m");
                
            }
            for(int j = 0; j < 16; j++)
            {
                int x = h[i][j];
                if(k % 2 ==1) {x = h2[i][j];}
                printf("\e[48;5;%dm", color(x,i));
                printf(" ");
                printf("%2s",""); // printf("%2d", x);
                printf("\e[0m");
                
            }
            for(int j = 15; j > -1; j--)
            {
                int x = h[i][j];
                if(k % 2 ==1) {x = h[i][j];}
                printf("\e[48;5;%dm", color(x,i));
                printf(" ");
                printf("%2s",""); // printf("%2d", x);
                printf("\e[0m");
                
            }
            
            
            printf("\n");
        }
        usleep(125000);
    }
    int main() {
        for (int k = 0; k < 55; k++) 
        { 
            dote(k);

        }
        for (int k = 55; k > 0; k--) { dote(k); }
    }